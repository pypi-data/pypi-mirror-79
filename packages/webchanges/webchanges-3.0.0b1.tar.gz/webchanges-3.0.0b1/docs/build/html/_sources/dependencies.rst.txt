.. _dependencies:

Dependencies
============

Python version
--------------

`urlwatch` requires `Python <https://www.python.org/>`__ 3.6 or higher to run.

Mandatory Packages
------------------

If `urlwatch` is installed with `pip`, these Python packages are installed automatically:

* `appdirs <https://github.com/ActiveState/appdirs>`__
* `html2text <https://github.com/Alir3z4/html2text>`__
* `lxml <https://lxml.de>`__
* `markdown2 <https://github.com/trentm/python-markdown2>`__
* `minidb <https://thp.io/2010/minidb/>`__
* `PyYAML <https://pyyaml.org/>`__
* `requests <https://requests.readthedocs.io/en/master/>`__
* `colorama <https://github.com/tartley/colorama>`__  (for Windows installations)

Optional Packages
-----------------

Certain features require additional Python packages to work. These optional packages can be installed using:

    python3 -m pip install <packagename>
    # or, to install to ``$HOME``
    python3 -m pip install <packagename> --user

Where ``<packagename>`` is one of the following:

+-------------------------+-------------------------------------------------------------------------+
| Feature                 | Python package(s) to install                                            |
+=========================+=========================================================================+
| ``url`` job with        | - `pyppeteer <https://github.com/pyppeteer/pyppeteer>`__                |
| ``use _browser: true``  |   and its OS-specific dependencies :sup:`(1)`                           |
+-------------------------+-------------------------------------------------------------------------+
| ``beautify`` filter     | - `beautifulsoup4 <https://www.crummy.com/software/BeautifulSoup/>`__   |
|                         | - `jsbeautifier <https://pypi.org/project/jsbeautifier/>`__ :sup:`(2)`  |
|                         | - `cssbeautifier <https://pypi.org/project/cssbeautifier/>`__ :sup:`(3)`|
+-------------------------+-------------------------------------------------------------------------+
| ``pdf2text`` filter     | - `pdftotext <https://github.com/jalan/pdftotext>`__                    |
|                         | - its OS-specific dependencies (see the above link)                     |
+-------------------------+-------------------------------------------------------------------------+
| ``ocr`` filter          | - `pytesseract <https://github.com/madmaze/pytesseract>`__              |
|                         | - `Pillow <https://python-pillow.org>`__                                |
+-------------------------+-------------------------------------------------------------------------+
| ``pushover`` reporter   | - `chump <https://github.com/karanlyons/chump/>`__                      |
+-------------------------+-------------------------------------------------------------------------+
| ``pushbullet`` reporter | - `pushbullet.py <https://github.com/randomchars/pushbullet.py>`__      |
+-------------------------+-------------------------------------------------------------------------+
| ``matrix`` reporter     | - `matrix_client <https://github.com/matrix-org/matrix-python-sdk>`__   |
+-------------------------+-------------------------------------------------------------------------+
| ``xmpp`` reporter       | - `aioxmpp <https://github.com/horazont/aioxmpp>`__                     |
+-------------------------+-------------------------------------------------------------------------+
| Developers:             | - `flake8 <https://gitlab.com/pycqa/flake8>`__                          |
|                         | - `flake8-import-order                                                  |
|                         |   <https://github.com/PyCQA/flake8-import-order>`__                     |
|                         | - `pytest <https://docs.pytest.org/en/latest/`__                        |
|                         | - `docutils <https://docutils.sourceforge.io>`__                        |
|                         | - job, filter and reporter dependencies as needed (see above)           |
+-------------------------+-------------------------------------------------------------------------+

:sup:`(1)` ``pypetteer``'s OS-specific dependencies are listed `here
<https://github.com/puppeteer/puppeteer/blob/main/docs/troubleshooting.md#chrome-headless-doesnt-launch>`__.
A missing dependency is often the cause of the error ``pyppeteer.errors.BrowserError: Browser closed unexpectedly``.

:sup:`(2)` Optional, to beautify content of <script> tags

:sup:`(3)` Optional, to beautify content of <style> tags
