import g from"../../components/ChartPage.js";import e,{useCallback as p,useEffect as h,useMemo as C,useRef as R,useState as E}from"../../../web_modules/react.js";import f from"../../components/SamplePage/AudioChart.js";import j from"../../components/Content.js";import P from"../../components/Error.js";import x from"../../components/RunAside.js";import A from"../../components/Title.js";import{rem as w}from"../../utils/style.js";import T from"../../hooks/useTagFilter.js";import{useTranslation as b}from"../../../web_modules/react-i18next.js";const U={height:w(244)},S=()=>{const{t:a}=b(["sample","common"]),r=R();h(()=>{const i=globalThis.AudioContext||globalThis.webkitAudioContext;return r.current=new i,()=>{var n;(n=r.current)===null||n===void 0||n.close()}},[]);const[t,m]=E(!0),{runs:o,tagsWithSingleRun:c,selectedRuns:u,onChangeRuns:l,loading:s}=T("audio",t),_=C(()=>o.length?e.createElement(x,{runs:o,selectedRuns:u,onChangeRuns:l,running:t,onToggleRunning:m}):null,[l,t,o,u]),d=p(({run:i,label:n})=>e.createElement(f,{audioContext:r.current,run:i,tag:n,running:t}),[t]);return e.createElement(e.Fragment,null,e.createElement(A,null,a("common:sample")," - ",a("common:audio")),e.createElement(j,{aside:_,loading:s},!s&&!o.length?e.createElement(P,null):e.createElement(g,{items:c,chartSize:U,withChart:d,loading:s})))};export default S;
