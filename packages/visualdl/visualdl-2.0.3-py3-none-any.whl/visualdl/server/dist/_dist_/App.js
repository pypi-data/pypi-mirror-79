import P from"../__snowpack__/env.js";import.meta.env=P;import e,{Suspense as R,useEffect as _,useMemo as h,useState as g}from"../web_modules/react.js";import{Redirect as U,Route as m,BrowserRouter as w,Switch as b,useLocation as j}from"../web_modules/react-router-dom.js";import{headerHeight as i,position as v,size as y}from"./utils/style.js";import N from"./components/BodyLoading.js";import C from"./components/ErrorBoundary.js";import c from"./pages/error.js";import{Helmet as T}from"../web_modules/react-helmet.js";import u from"../web_modules/nprogress.js";import x from"./components/Navbar.js";import{SWRConfig as A}from"../web_modules/swr.js";import{ToastContainer as B}from"../web_modules/react-toastify.js";import{fetcher as L}from"./utils/fetch.js";import H from"../web_modules/@visualdl/wasm.js";import d from"./routes/index.js";import p from"../web_modules/styled-components.js";import{useTranslation as S}from"../web_modules/react-i18next.js";const l=import.meta.env.SNOWPACK_PUBLIC_PATH,k=p.main.withConfig({displayName:"App__Main",componentId:"n063fb-0"})(["padding-top:",";"],i),I=p.header.withConfig({displayName:"App__Header",componentId:"n063fb-1"})(["z-index:10000;"," ",""],y(i,"100%"),v("fixed",0,0,null,0)),s=d.find(t=>t.default),O=d.reduce((t,r)=>(r.children?t.push(...r.children):t.push(r),t),[]),M=()=>(_(()=>(u.start(),()=>{u.done()}),[]),null),V=()=>{const t=j();return _(()=>{globalThis._hmt.push(["_trackPageview",l+t.pathname])},[t.pathname]),null},W=()=>{var t;const{t:r,i18n:o}=S("errors"),E=h(()=>o.language?o.dir(o.language):"",[o]),[n,f]=g(!1);return _(()=>{(async()=>{n||(await H(`${l}/wasm/visualdl.wasm`),f(!0))})()},[n]),e.createElement("div",{className:"app"},e.createElement(T,{defaultTitle:"VisualDL",titleTemplate:"%s - VisualDL"},e.createElement("html",{lang:o.language,dir:E})),e.createElement(A,{value:{fetcher:L,revalidateOnFocus:!1,revalidateOnReconnect:!1}},n?e.createElement(k,null,e.createElement(w,{basename:l||"/"},e.createElement(V,null),e.createElement(I,null,e.createElement(x,null)),e.createElement(C,{fallback:e.createElement(c,null)},e.createElement(R,{fallback:e.createElement(M,null)},e.createElement(b,null,e.createElement(U,{exact:!0,from:"/",to:(t=s==null?void 0:s.path)!==null&&t!==void 0?t:"/index"}),O.map(a=>e.createElement(m,{key:a.id,path:a.path,component:a.component})),e.createElement(m,{path:"*"},e.createElement(c,{title:r("errors:page-not-found")}))))))):e.createElement(N,null),e.createElement(B,null)))};export default W;
