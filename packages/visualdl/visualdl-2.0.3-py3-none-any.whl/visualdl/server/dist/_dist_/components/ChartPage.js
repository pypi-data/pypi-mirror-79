import L from"../../__snowpack__/env.js";import.meta.env=L;function x(e,o){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);o&&(l=l.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,l)}return n}function U(e){for(var o=1;o<arguments.length;o++){var n=arguments[o]!=null?arguments[o]:{};o%2?x(Object(n),!0).forEach(function(l){T(e,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(n,l))})}return e}function T(e,o,n){return o in e?Object.defineProperty(e,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[o]=n,e}import a,{useCallback as B,useEffect as V,useMemo as g,useState as k}from"../../web_modules/react.js";import{Trans as R,useTranslation as K}from"../../web_modules/react-i18next.js";import{backgroundColor as $,headerHeight as A,link as D,primaryColor as W,rem as r,textLighterColor as H}from"../utils/style.js";import M from"../../web_modules/react-spinners/BarLoader.js";import q from"./Chart.js";import S from"./ChartCollapse.js";import z from"./Pagination.js";import F from"./SearchInput.js";import G from"../../web_modules/lodash/groupBy.js";import _ from"../../web_modules/styled-components.js";import J from"../hooks/useSearchValue.js";const Q=import.meta.env.SNOWPACK_PUBLIC_PATH,X=_(z).withConfig({displayName:"ChartPage__StyledPagination",componentId:"sc-24xkc5-0"})(["margin-top:",";"],r(20)),Y=_.div.withConfig({displayName:"ChartPage__Wrapper",componentId:"sc-24xkc5-1"})(["display:flex;flex-wrap:wrap;justify-content:flex-start;align-items:stretch;align-content:flex-start;margin-bottom:-",";> *{margin:0 "," "," 0;flex-shrink:0;flex-grow:0;&.maximized{margin-right:0;}}"],r(20),r(20),r(20)),Z=_.div.withConfig({displayName:"ChartPage__Search",componentId:"sc-24xkc5-2"})(["width:",";margin-bottom:",";"],r(280),r(16)),ee=_.div.withConfig({displayName:"ChartPage__Loading",componentId:"sc-24xkc5-3"})(["display:flex;justify-content:center;align-items:center;min-height:",";padding:"," 0;"],r(200),r(40)),N=_.div.withConfig({displayName:"ChartPage__Empty",componentId:"sc-24xkc5-4"})(["width:100%;text-align:center;font-size:",";color:",";line-height:",";height:",";padding:"," 0 ",";background-color:",";background-image:url(",");background-repeat:no-repeat;background-position:calc(50% + ",") ",";background-size:"," ",";",""],r(16),H,r(24),e=>{var o;return(o=e.height)!==null&&o!==void 0?o:"auto"},r(320),r(70),$,`${Q}/images/empty.svg`,r(25),r(70),r(280),r(244),D),te=({items:e,loading:o,chartSize:n,withChart:l,className:h})=>{const{t:m}=K("common"),[p,E]=k(1),f=12,[b,v]=k(""),u=J(b),s=g(()=>{try{var t;const c=new RegExp(u);return(t=e==null?void 0:e.filter(i=>c.test(i.label)))!==null&&t!==void 0?t:[]}catch(c){return[]}},[e,u]),w=g(()=>{var t;return(t=s==null?void 0:s.slice((p-1)*f,p*f))!==null&&t!==void 0?t:[]},[s,p]);V(()=>{E(1)},[u]);const C=g(()=>Object.entries(G(e??[],t=>t.label.split("/")[0])).sort(([t],[c])=>{const i=t.toUpperCase(),d=c.toUpperCase();return i<d?-1:i>d?1:0}),[e]),I=g(()=>Math.ceil(s.length/f),[s]),j=B((t,c)=>o?a.createElement(ee,null,a.createElement(M,{color:W,width:"20%",height:"4px"})):a.createElement(Y,null,t.length?t.map((i,d)=>{var P,y;const O=Symbol(i.label);return a.createElement(q,{cid:O,key:i.id||i.label,width:(P=n==null?void 0:n.width)!==null&&P!==void 0?P:r(430),height:(y=n==null?void 0:n.height)!==null&&y!==void 0?y:r(337)},l==null?void 0:l(U(U({},i),{},{cid:O}),d))}):a.createElement(N,{height:r(500)},c?a.createElement(R,{i18nKey:"common:search-empty"},"Nothing found. Please try again with another word.",a.createElement("br",null),"Or you can ",a.createElement("a",{onClick:()=>v("")},"see all charts"),"."):m("common:empty"))),[l,o,n,m]);return a.createElement("div",{className:h},a.createElement(Z,null,a.createElement(F,{placeholder:m("common:search-tags"),rounded:!0,value:b,onChange:t=>v(t)})),u?a.createElement(S,{title:m("common:search-result"),total:s.length},j(w,!0),w.length?a.createElement(X,{page:p,total:I,onChange:E}):null):C.length?C.map((t,c)=>a.createElement(S,{title:t[0],key:t[0],total:t[1].length,opened:c===0},j(t[1]))):a.createElement(N,{height:`calc(100vh - ${A} - ${r(96)})`},a.createElement(R,{i18nKey:"common:unselected-empty"},"Nothing selected.",a.createElement("br",null),"Please select display data from right side.")))};export default te;
