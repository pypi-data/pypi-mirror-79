function w(e,i){if(e==null)return{};var t=P(e,i),o,r;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++){if(o=l[r],i.indexOf(o)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,o))continue;t[o]=e[o]}}return t}function P(e,i){if(e==null)return{};var t={},o=Object.keys(e),r,l;for(l=0;l<o.length;l++){if(r=o[l],i.indexOf(r)>=0)continue;t[r]=e[r]}return t}import*as _ from"../utils/chart.js";import u,{useEffect as A,useImperativeHandle as L}from"../../web_modules/react.js";import{primaryColor as R}from"../utils/style.js";import U,{Wrapper as k}from"../hooks/useECharts.js";import C from"../../web_modules/react-spinners/GridLoader.js";import m from"../../web_modules/lodash/defaultsDeep.js";import{formatTime as g}from"../utils/index.js";import{useTranslation as I}from"../../web_modules/react-i18next.js";export let XAxisType;(function(e){e.value="value",e.log="log",e.time="time"})(XAxisType||(XAxisType={}));export let YAxisType;(function(e){e.value="value",e.log="log"})(YAxisType||(YAxisType={}));const S=u.forwardRef(({options:e,data:i,title:t,loading:o,zoom:r,className:l,onInit:h},y)=>{const{i18n:f}=I(),{ref:b,echart:a,wrapper:x,saveAsImage:j}=U({loading:!!o,zoom:r,autoFit:!0,onInit:h});return L(y,()=>({restore:()=>{a==null||a.dispatchAction({type:"restore"})},saveAsImage:()=>{j(t)}})),A(()=>{var p,c;const{color:N,colorAlt:T,series:E}=_,O=w(_,["color","colorAlt","series"]);let s=m({title:{text:t??""},series:i==null?void 0:i.map(n=>{var d,v;return m({showSymbol:((d=n==null||((v=n.data)===null||v===void 0)?void 0:v.length)!==null&&d!==void 0?d:0)<=1,type:"line"},n,E)})},e,O);((p=s)===null||p===void 0?void 0:p.xAxis).type==="time"&&(s=m({xAxis:{axisLabel:{formatter:n=>g(n,f.language,"LTS")}}},s)),((c=s)===null||c===void 0?void 0:c.yAxis).type==="time"&&(s=m({yAxis:{axisLabel:{formatter:n=>g(n,f.language,"LTS")}}},s)),a==null||a.setOption(s,{notMerge:!0})},[e,i,t,f.language,a]),u.createElement(k,{ref:x,className:l},!a&&u.createElement("div",{className:"loading"},u.createElement(C,{color:R,size:"10px"})),u.createElement("div",{className:"echarts",ref:b}))});export default S;
