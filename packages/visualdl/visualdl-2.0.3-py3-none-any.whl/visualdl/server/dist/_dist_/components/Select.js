let T=o=>o,C;import c,{useCallback as m,useEffect as M,useMemo as b,useState as $}from"../../web_modules/react.js";import{backgroundColor as z,backgroundFocusedColor as F,borderColor as B,borderFocusedColor as W,borderRadius as H,borderRadiusShortHand as S,css as D,ellipsis as j,em as h,math as G,sameBorder as J,selectedColor as K,size as x,textLighterColor as R,transitionProps as k}from"../utils/style.js";import Q from"./Checkbox.js";import X from"./Icon.js";import d from"../../web_modules/styled-components.js";import Y from"../hooks/useClickOutside.js";import{useTranslation as Z}from"../../web_modules/react-i18next.js";import V from"../../web_modules/lodash/without.js";export const padding=h(10),height=h(36);const ee=d.div.withConfig({displayName:"Select__Wrapper",componentId:"sc-1rc4rcq-0"})(["height:",";line-height:calc("," - 2px);max-width:100%;display:inline-block;position:relative;background-color:",";"," "," "," &:hover{border-color:",";}"],height,height,z,J({radius:!0}),o=>o.opened?S("bottom","0"):"",k("border-color"),W),oe=d.div.withConfig({displayName:"Select__Trigger",componentId:"sc-1rc4rcq-1"})(["padding:",";display:inline-flex;"," justify-content:space-between;align-items:center;cursor:pointer;",""],padding,x("100%"),o=>o.selected?"":`color: ${R}`),te=d(X).withConfig({displayName:"Select__TriggerIcon",componentId:"sc-1rc4rcq-2"})([""," text-align:center;display:block;flex-shrink:0;transform:rotate(","deg) scale(",");",""],x(h(14)),o=>o.opened?"180":"0",10/14,k("transform")),se=d.span.withConfig({displayName:"Select__Label",componentId:"sc-1rc4rcq-3"})(["flex-grow:1;padding-right:",";",""],h(10),j()),le=d.div.withConfig({displayName:"Select__List",componentId:"sc-1rc4rcq-4"})(["position:absolute;top:100%;width:calc(100% + 2px);max-height:",";overflow-x:hidden;overflow-y:auto;left:-1px;padding:"," 0;border:inherit;border-top-color:",";"," display:",";z-index:9999;line-height:1;background-color:inherit;box-shadow:0 5px 6px 0 rgba(0,0,0,0.05);",""],G(`4.35 * ${height} + 2 * ${padding}`),padding,B,S("bottom",H),o=>o.opened?"block":"none",o=>o.empty?{color:R,textAlign:"center"}:""),L=D(C||(C=T`
    display: block;
    cursor: pointer;
    padding: 0 ${0};
    ${0}
    line-height: ${0};
    ${0}

    &:hover {
        background-color: ${0};
    }
`),padding,x(height,"100%"),height,k(["color","background-color"]),F),ie=d.div.withConfig({displayName:"Select__ListItem",componentId:"sc-1rc4rcq-5"})([""," "," ",""],j(),L,o=>o.selected?`color: ${K};`:""),ne=d(Q).withConfig({displayName:"Select__MultipleListItem",componentId:"sc-1rc4rcq-6"})([""," display:flex;align-items:center;"],L),re=({list:o,value:r,placeholder:w,multiple:i,className:N,onChange:n})=>{const{t:g}=Z("common"),[a,I]=$(!1),P=m(()=>I(!a),[a]),f=m(()=>I(!1),[]),[l,u]=$(i?Array.isArray(r)?r:[]:r);M(()=>u(i?Array.isArray(r)?r:[]:r),[i,r,u]);const _=b(()=>!!(i?l&&l.length!==0:l),[i,l]),q=m(e=>{u(e),n==null||n(e),f()},[f,n]),U=m((e,s)=>{let t=l;s?t.includes(e)||(t=[...t,e]):t.includes(e)&&(t=V(t,e)),u(t),n==null||n(t)},[l,n]),O=Y(f),p=b(()=>{var e;return(e=o==null?void 0:o.map(s=>["string","number"].includes(typeof s)?{value:s,label:s+""}:s))!==null&&e!==void 0?e:[]},[o]),E=b(()=>p.length===0,[p]),v=m(e=>{var s,t;return(s=(t=p.find(A=>A.value===e))===null||t===void 0?void 0:t.label)!==null&&s!==void 0?s:""},[p]),y=b(()=>_?i?l.map(v).join(" / "):v(l):w||g("common:select"),[i,l,v,_,w,g]);return c.createElement(ee,{ref:O,opened:a,className:N},c.createElement(oe,{onClick:P,selected:_,title:_&&y?String(y):""},c.createElement(se,null,y),c.createElement(te,{opened:a,type:"chevron-down"})),c.createElement(le,{opened:a,empty:E},E?g("common:empty"):p.map((e,s)=>i?c.createElement(ne,{value:l.includes(e.value),key:s,title:e.label,size:"small",onChange:t=>U(e.value,t)},e.label):c.createElement(ie,{selected:e.value===l,key:s,title:e.label,onClick:()=>q(e.value)},e.label))))};export default re;
