(this.webpackJsonptravis=this.webpackJsonptravis||[]).push([[0],{155:function(e,t,n){e.exports=n(282)},160:function(e,t,n){},162:function(e,t,n){},193:function(e,t){},282:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(35),c=n.n(o),s=(n(160),n(13)),i=n.n(s),u=n(8),l=n(22),d=n(33),h=(n(162),n(133)),f=n.n(h),m=n(79),p=n(18),b=n.n(p),v=n(96),O=n(57),g=n(95),y=n(135),j=n(2),w=n(58),E=n(82),k=n(136),x=n(137),S=n.n(x),C=Object(m.fitWidth)((function(e){var t=e.type,n=e.width,a=e.data,o=e.ratio,c=e.chartType,s=(e.indicator,e.transactions),i=function(e,t,n){switch(e){case"m5":return n.isSameOrAfter(t,"minutes")&&n.isBefore(t.add(5,"minutes"),"minutes");case"m15":return n.isSameOrAfter(t,"minutes")&&n.isBefore(t.add(15,"minutes"),"minutes");case"h1":return n.isSameOrAfter(t,"hours")&&n.isBefore(t.add(1,"hours"),"hours");case"h4":return n.isSameOrAfter(t,"hours")&&n.isBefore(t.add(4,"hours"),"hours");default:return t.isSame(n,"hours")}},l=Object(E.sma)().id(0).options({windowSize:20}).merge((function(e,t){e.sma20=t})).accessor((function(e){return e.sma20})),h=Object(E.sma)().options({windowSize:50}).merge((function(e,t){e.sma50=t})).accessor((function(e){return e.sma50})).stroke("blue"),f=S()().windowSize(2).accumulator((function(e){for(var t=Object(d.a)(e,2),n=(t[0],t[1].date),a=0;a<s.length;a++){var r=s[a];if(i(c,b()(n),r.date)){if(r.amount>0)return"LONG";if(r.amount<0)return"SHORT"}}})).merge((function(e,t){e.longShort=t})),m={fontFamily:"Glyphicons Halflings",fontSize:20,opacity:.8,onClick:console.log.bind(console)},p=Object(u.a)(Object(u.a)({},m),{},{fill:"#006517",text:"\ue093",y:function(e){return(0,e.yScale)(e.datum.low)+20},tooltip:"Go long"}),x=Object(u.a)(Object(u.a)({},m),{},{fill:"#E20000",text:"\ue094",y:function(e){return(0,e.yScale)(e.datum.high)},tooltip:"Go short"}),C=f(l(h(a))),A=k.discontinuousTimeScaleProvider.inputDateAccessor((function(e){return e.date}))(C),T=A.data,L=A.xScale,N=A.xAccessor,I=A.displayXAccessor;console.log("render: ",a,T,l.accessor(),l.stroke());var H=[N(Object(j.last)(T)),N(T[Math.max(0,T.length-150)])];return r.a.createElement(v.b,{height:400,ratio:o,width:n,margin:{left:50,right:50,top:10,bottom:30},type:t,seriesName:"MSFT",data:T,xAccessor:N,displayXAccessor:I,xScale:L,xExtents:H},r.a.createElement(v.a,{id:1,yExtents:[function(e){return[e.high,e.low]},l.accessor()]},r.a.createElement(g.XAxis,{axisAt:"bottom",orient:"bottom",ticks:6}),r.a.createElement(g.YAxis,{axisAt:"left",orient:"left",ticks:5}),r.a.createElement(O.CandlestickSeries,null),r.a.createElement(O.LineSeries,{yAccessor:l.accessor(),stroke:l.stroke()}),r.a.createElement(O.LineSeries,{yAccessor:h.accessor(),stroke:h.stroke()}),r.a.createElement(y.CurrentCoordinate,{yAccessor:l.accessor(),fill:l.stroke()}),r.a.createElement(w.Annotate,{with:w.LabelAnnotation,when:function(e){return"LONG"===e.longShort},usingProps:p}),r.a.createElement(w.Annotate,{with:w.LabelAnnotation,when:function(e){return"SHORT"===e.longShort},usingProps:x})))})),A=(n(303),n(304)),T=n(23),L=n(308),N=[{id:Object(L.a)(),date:b()("2016-03-25"),amount:-100,price:420.1,value:4e4,symbol:""},{id:Object(L.a)(),date:b()("2016-03-26"),amount:100,price:420.1,value:-4e4,symbol:""},{id:Object(L.a)(),date:b()("2016-03-27"),amount:-100,price:420.1,value:4e4,symbol:""},{id:Object(L.a)(),date:b()("2016-03-28"),amount:100,price:420.1,value:-4e4,symbol:""},{id:Object(L.a)(),date:b()("2016-03-29"),amount:-100,price:420.1,value:4e4,symbol:""}];function I(e){return function(t){return t.date=e(t.date),t.open=+t.open,t.high=+t.high,t.low=+t.low,t.close=+t.close,t.volume=+t.volume,t}}Object(T.c)("%Y-%m-%d");var H=Object(T.c)("%Y-%m-%d %H:%M:%S"),_=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("https://cdn.rawgit.com/rrag/react-stockcharts/master/docs/data/bitstamp_xbtusd_5m.csv").then((function(e){return e.text()})).then((function(e){return Object(A.a)(e,I(H))})).then((function(e){e.sort((function(e,t){return e.date.valueOf()-t.date.valueOf()})),console.log("data4: ",e),t=e}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("https://cdn.rawgit.com/rrag/react-stockcharts/master/docs/data/bitstamp_xbtusd_15m.csv").then((function(e){return e.text()})).then((function(e){return Object(A.a)(e,I(H))})).then((function(e){e.sort((function(e,t){return e.date.valueOf()-t.date.valueOf()})),console.log("data4: ",e);var n=[];e.forEach((function(e){var t=b()(e.date).minutes();15!==t&&30!==t&&45!==t&&0!==t||n.push(e)})),t=n}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("https://cdn.rawgit.com/rrag/react-stockcharts/master/docs/data/bitstamp_xbtusd_1h.csv").then((function(e){return e.text()})).then((function(e){return Object(A.a)(e,I(H))})).then((function(e){e.sort((function(e,t){return e.date.valueOf()-t.date.valueOf()})),console.log("data4: ",e),t=e}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("https://cdn.rawgit.com/rrag/react-stockcharts/master/docs/data/bitstamp_xbtusd_4h.csv").then((function(e){return e.text()})).then((function(e){return Object(A.a)(e,I(H))})).then((function(e){e.sort((function(e,t){return e.date.valueOf()-t.date.valueOf()})),console.log("data4: ",e),t=e}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=N,e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=n(284),z=n(305),F=n(306),R=n(144),W=n.n(R),X=n(142),Y=n.n(X),J=n(145),U=n.n(J),$=n(143),q=n.n($),K=n(307),Q=n(59),V=n(83),Z=function(){function e(){Object(Q.a)(this,e),this.Chart=void 0,this.transactions=void 0,this.Chart={m1:[],m5:[],m15:[],h1:[],h4:[],d1:[],w1:[]},this.transactions=[]}return Object(V.a)(e,[{key:"setChart",value:function(e,t){try{var n=[];switch(e.forEach((function(e){b()(e.date).isSameOrBefore("2016-03-30")&&b()(e.date).isSameOrAfter("2016-03-18")&&n.push({date:e.date,open:e.open,high:e.high,low:e.low,close:e.close,volume:e.volume})})),t){case"m1":this.Chart.m1=n;break;case"m5":this.Chart.m5=n;break;case"m15":this.Chart.m15=n;break;case"h1":this.Chart.h1=n;break;case"h4":this.Chart.h4=n;break;case"d1":this.Chart.d1=n;break;case"w1":this.Chart.w1=n}console.log("finish set chart",n,t)}catch(a){console.log("setChart Error",a)}}},{key:"setTransaction",value:function(e){try{var t=[];e.forEach((function(e){t.push({id:e.id,date:e.date,amount:e.amount,price:e.price,value:e.value,symbol:e.symbol})})),this.transactions=t}catch(n){console.log("setTransaction Error",n)}}}]),e}(),ee=function e(){Object(Q.a)(this,e),this.sma=void 0,this.sma=[]},te=f()("http://localhost:8000");var ne=function(){var e=Object(a.useState)(new Z),t=Object(d.a)(e,2),n=t[0],o=t[1],c=function(){var e=Object(a.useState)({Type:"NONE",Progress:0,Log:"",Error:"",Loading:!1}),t=Object(d.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(new Z),c=Object(d.a)(o,2),s=c[0],h=c[1];return{getDataSet:Object(a.useCallback)(Object(l.a)(i.a.mark((function e(){var t,n,a,o,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({Progress:0,Log:"",Error:"",Loading:!0,Type:"RUNNING"}),e.next=4,_();case 4:return t=e.sent,e.next=7,B();case 7:return n=e.sent,e.next=10,G();case 10:return a=e.sent,e.next=13,P();case 13:return o=e.sent,e.next=16,D();case 16:c=e.sent,s=new Z,console.log("debug: ",t,n,a,o,c),s.setChart(t,"m5"),s.setChart(n,"m15"),s.setChart(a,"h1"),s.setChart(o,"h4"),s.setTransaction(c),h(s),console.log("data2: ",s),r((function(e){return Object(u.a)(Object(u.a)({},e),{},{Progress:100,Loading:!1,Type:"FINISHED"})})),e.next=33;break;case 29:e.prev=29,e.t0=e.catch(0),console.log("error: ",e.t0),r((function(t){return Object(u.a)(Object(u.a)({},t),{},{Progress:0,Loading:!1,Error:e.t0,Type:"RUNNING"})}));case 33:case"end":return e.stop()}}),e,null,[[0,29]])}))),[n]),dataset:s,status:n}}(),s=c.getDataSet,h=c.dataset,f=c.status,p=Object(a.useState)({play:!1,id:void 0,speed:1e3}),v=Object(d.a)(p,2),O=v[0],g=v[1],y=Object(a.useState)({type:"h1"}),j=Object(d.a)(y,2),w=j[0],E=j[1];Object(a.useEffect)((function(){console.log("recieve message"),te.on("connect",(function(){return console.log("connected!")})),te.on("transactionstest",(function(e){return console.log("transactions",e)})),s()}),[]),Object(a.useEffect)((function(){"FINISHED"===f.Type&&(console.log("get data"),o(h))}),[f]),Object(a.useEffect)((function(){if(!0===O.play&&void 0===O.id){console.log("useEffect");var e=setInterval((function(){o((function(e){var t=e.Chart[w.type],n=t[t.length-1];console.log(e,n.date,b()(n.date).add(1,"days").toDate());var a=e;return a.Chart[w.type].push({date:b()(n.date).add(1,"days"),open:n.open,high:n.high,low:n.low,close:n.close,volume:n.volume}),a}))}),O.speed);g((function(t){return Object(u.a)(Object(u.a)({},t),{},{id:e,play:!0})}))}}),[O]);return f.Loading?r.a.createElement("div",null,"Loading..."):r.a.createElement("div",null,r.a.createElement(z.a,{color:"primary","aria-label":"outlined primary button group"},r.a.createElement(M.a,{onClick:function(){return E(Object(u.a)(Object(u.a)({},w),{},{type:"m5"}))}},"5M"),r.a.createElement(M.a,{onClick:function(){return E(Object(u.a)(Object(u.a)({},w),{},{type:"m15"}))}},"15M"),r.a.createElement(M.a,{onClick:function(){return E(Object(u.a)(Object(u.a)({},w),{},{type:"h1"}))}},"1H"),r.a.createElement(M.a,{onClick:function(){return E(Object(u.a)(Object(u.a)({},w),{},{type:"h4"}))}},"4H")),r.a.createElement(z.a,{color:"primary","aria-label":"outlined primary button group"},r.a.createElement(F.a,{onClick:function(){console.log("stop"),void 0!=O.id&&(clearInterval(O.id),g((function(e){return Object(u.a)(Object(u.a)({},e),{},{id:void 0,play:!1})})))},color:"primary","aria-label":"upload picture",component:"span"},r.a.createElement(Y.a,null)),r.a.createElement(F.a,{onClick:function(){console.log("speeddown"),g((function(e){return clearInterval(O.id),Object(u.a)(Object(u.a)({},e),{},{speed:2*e.speed,id:void 0})}))},color:"primary","aria-label":"upload picture",component:"span"},r.a.createElement(q.a,null)),r.a.createElement(F.a,{onClick:function(){console.log("play"),g((function(e){return Object(u.a)(Object(u.a)({},e),{},{play:!0})}))},color:"primary","aria-label":"upload picture",component:"span"},r.a.createElement(W.a,null)),r.a.createElement(F.a,{onClick:function(){console.log("speedup"),g((function(e){return clearInterval(O.id),Object(u.a)(Object(u.a)({},e),{},{speed:e.speed/2,id:void 0})}))},color:"primary","aria-label":"upload picture",component:"span"},r.a.createElement(U.a,null))),r.a.createElement(K.a,null,"speed: "+O.speed),r.a.createElement(K.a,null,"chartType: "+w.type),r.a.createElement(m.TypeChooser,null,(function(e){return r.a.createElement(C,{type:e,data:n.Chart[w.type],chartType:w.type,indicator:new ee,transactions:n.transactions})})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[155,1,2]]]);
//# sourceMappingURL=main.23af674e.chunk.js.map